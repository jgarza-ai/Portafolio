<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>José Garza - Desarrollador Full Stack y Especialista en Automatización</title>
    
    <!-- Tailwind CSS (crítico) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font Awesome para iconos (crítico) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Optimización: Preload para fuentes críticas -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" as="style">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">

    <!-- Optimización: DNS prefetch para dominios externos -->
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="//cdn.jsdelivr.net">

    <!-- Scripts con Lazy Loading y Optimización -->
    <script>
        // Sistema de Lazy Loading para Scripts
        class LazyLoader {
            constructor() {
                this.loadedScripts = new Set();
                this.pendingScripts = new Map();
                this.loadPromises = new Map();
            }

            async loadScript(src, id, options = {}) {
                if (this.loadedScripts.has(id)) {
                    return Promise.resolve();
                }

                if (this.loadPromises.has(id)) {
                    return this.loadPromises.get(id);
                }

                const promise = new Promise((resolve, reject) => {
                    const script = document.createElement('script');
                    script.src = src;
                    script.async = true;
                    script.defer = options.defer || false;

                    if (options.integrity) {
                        script.integrity = options.integrity;
                        script.crossOrigin = 'anonymous';
                    }

                    script.onload = () => {
                        this.loadedScripts.add(id);
                        this.loadPromises.delete(id);
                        resolve();
                    };

                    script.onerror = () => {
                        console.error(`Error loading script: ${src}`);
                        this.loadPromises.delete(id);
                        reject(new Error(`Failed to load ${src}`));
                    };

                    document.head.appendChild(script);
                });

                this.loadPromises.set(id, promise);
                return promise;
            }

            async preloadCritical() {
                try {
                    // Cargar scripts en orden de prioridad
                    await this.loadScript('https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js', 'gsap');
                    await this.loadScript('https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js', 'threejs');
                    await this.loadScript('https://cdn.jsdelivr.net/npm/chart.js', 'chartjs');
                    await this.loadScript('https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js', 'gsap-scrolltrigger');

                    // Inicializar componentes después de cargar los scripts
                    this.initializeComponents();
                } catch (error) {
                    console.error('Error loading critical scripts:', error);
                }
            }

            initializeComponents() {
                // Inicializar componentes que dependen de los scripts cargados
                if (typeof window.initializeAnimations === 'function') {
                    window.initializeAnimations();
                }
                if (typeof window.initializeCharts === 'function') {
                    window.initializeCharts();
                }
            }
        }

        const lazyLoader = new LazyLoader();

        // Optimización: Cargar scripts cuando el navegador esté inactivo
        if ('requestIdleCallback' in window) {
            requestIdleCallback(() => lazyLoader.preloadCritical(), { timeout: 2000 });
        } else {
            // Fallback para navegadores que no soportan requestIdleCallback
            document.addEventListener('DOMContentLoaded', () => {
                setTimeout(() => lazyLoader.preloadCritical(), 100);
            });
        }

        // Optimización: Service Worker para caching (solo en producción)
        if ('serviceWorker' in navigator && window.location.protocol === 'https:') {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js').catch(() => {
                    // Ignorar error si no hay service worker
                });
            });
        }
    </script>
    
    <style>
        :root {
            --dark: #0D0A1F;
            --dark-card: #1A1531;
            --primary: #7C3AED;
            --secondary: #EC4899;
            --accent: #F59E0B;
            --success: #10B981;
            --info: #3B82F6;
            --gradient-start: #7C3AED;
            --gradient-end: #EC4899;
            --gradient-alt: #F59E0B;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--dark);
            color: #fff;
            overflow-x: hidden;
        }
        
        /* Fondo con partículas */
        #particles-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        
        /* Glassmorphism con colores */
        .glass {
            background: rgba(26, 21, 49, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid rgba(124, 58, 237, 0.2);
        }
        
        .glass-accent {
            background: rgba(236, 72, 153, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid rgba(236, 72, 153, 0.2);
        }
        
        /* Gradientes de texto */
        .gradient-text {
            background: linear-gradient(to right, var(--gradient-start), var(--gradient-end));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .gradient-text-alt {
            background: linear-gradient(to right, var(--gradient-end), var(--gradient-alt));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        /* Animación de entrada - visible por defecto para mejor UX */
        .fade-in {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        /* Clase para animar cuando JS está disponible */
        .fade-in-animate {
            opacity: 0;
            transform: translateY(20px);
        }
        
        /* Tarjetas de proyecto con colores */
        .project-card {
            transition: all 0.3s ease;
            overflow: hidden;
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.1), rgba(236, 72, 153, 0.1));
            border: 1px solid rgba(124, 58, 237, 0.2);
        }
        
        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(124, 58, 237, 0.3);
            border-color: var(--primary);
        }
        
        .project-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(124, 58, 237, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .project-card:hover::before {
            left: 100%;
        }
        
        /* Tarjetas de tecnología con colores */
        .tech-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            transition: all 0.3s ease;
            background: rgba(26, 21, 49, 0.5);
            border-radius: 12px;
            border: 1px solid rgba(124, 58, 237, 0.1);
        }
        
        .tech-card:hover {
            transform: scale(1.05);
            background: rgba(124, 58, 237, 0.1);
            border-color: var(--primary);
        }
        
        .tech-icon {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .tech-icon.python { color: #3776AB; }
        .tech-icon.javascript { color: #F7DF1E; }
        .tech-icon.react { color: #61DAFB; }
        .tech-icon.node { color: #339933; }
        .tech-icon.docker { color: #2496ED; }
        .tech-icon.database { color: #336791; }
        .tech-icon.google { color: #4285F4; }
        .tech-icon.robot { color: var(--primary); }
        .tech-icon.brain { color: var(--secondary); }
        .tech-icon.workflow { color: var(--accent); }
        .tech-icon.comments { color: var(--info); }
        .tech-icon.flutter { color: #02569B; }
        
        /* Demo containers */
        .demo-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(13, 10, 31, 0.95);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .demo-content {
            background: linear-gradient(135deg, var(--dark-card), rgba(124, 58, 237, 0.1));
            border-radius: 16px;
            padding: 2rem;
            max-width: 900px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            position: relative;
            border: 1px solid rgba(124, 58, 237, 0.3);
        }
        
        .close-demo {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(236, 72, 153, 0.2);
            border: 1px solid var(--secondary);
            color: #fff;
            font-size: 1.5rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .close-demo:hover {
            background: var(--secondary);
            transform: rotate(90deg);
        }
        
        /* Chat demo mejorado */
        .chat-container {
            display: flex;
            flex-direction: column;
            height: 500px;
            border-radius: 12px;
            overflow: hidden;
            background: linear-gradient(135deg, #128C7E, #075E54);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .chat-header {
            background: linear-gradient(135deg, #075E54, #128C7E);
            color: white;
            padding: 1rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .chat-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .chat-messages {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            background: #ECE5DD;
            background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcz4KICAgIDxwYXR0ZXJuIGlkPSJwYXR0ZXJuIiB4PSIwIiB5PSIwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjZTVkY2M4Ii8+CiAgICAgIDxjaXJjbGUgY3g9IjIwIiBjeT0iMjAiIHI9IjIiIGZpbGw9IiNkOWQ5ZDkiLz4KICAgICAgPGNpcmNsZSBjeD0iODAiIGN5PSI4MCIgcj0iMiIgZmlsbD0iI2Q5ZDlkOSIvPgogICAgPC9wYXR0ZXJuPgogIDwvZGVmcz4KICA8cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0idXJsKCNwYXR0ZXJuKSIvPgo8L3N2Zz4=');
        }
        
        .chat-input-container {
            padding: 1rem;
            background: white;
            border-top: 1px solid #ddd;
            display: flex;
            gap: 0.5rem;
        }
        
        .chat-input {
            flex: 1;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 24px;
            font-size: 0.9rem;
        }
        
        .chat-send {
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            border-radius: 24px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .chat-send:hover {
            transform: scale(1.05);
        }
        
        .message {
            margin-bottom: 1rem;
            max-width: 70%;
            animation: messageSlide 0.3s ease;
        }
        
        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .bot-message {
            align-self: flex-start;
            background: white;
            padding: 0.75rem 1rem;
            border-radius: 18px 18px 18px 4px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: relative;
            color: #303030;
        }
        
        .user-message {
            align-self: flex-end;
            background: linear-gradient(135deg, #DCF8C6, #A8E6CF);
            color: #303030;
            padding: 0.75rem 1rem;
            border-radius: 18px 18px 4px 18px;
            margin-left: auto;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .product-card {
            display: flex;
            align-items: center;
            background: white;
            border-radius: 12px;
            padding: 1rem;
            margin: 0.5rem 0;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .product-card:hover {
            transform: scale(1.02);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
            border-color: var(--primary);
        }

        .product-card.selected {
            border-color: var(--success);
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.05), rgba(16, 185, 129, 0.1));
        }

        .product-image {
            width: 70px;
            height: 70px;
            object-fit: cover;
            border-radius: 10px;
            margin-right: 1rem;
            transition: transform 0.3s ease;
        }

        .product-card:hover .product-image {
            transform: scale(1.05);
        }

        .product-info {
            flex: 1;
        }

        .product-name {
            font-weight: bold;
            margin-bottom: 0.25rem;
            color: #303030;
            font-size: 1rem;
        }

        .product-description {
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 0.25rem;
        }

        .product-price {
            color: var(--accent);
            font-weight: bold;
            font-size: 1.1rem;
        }

        .product-badge {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 0.2rem 0.6rem;
            border-radius: 20px;
            font-size: 0.7rem;
            margin-left: auto;
        }

        /* Carrito de compras */
        .cart-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--accent);
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        /* Estados de carga */
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 0.5rem 1rem;
        }

        .typing-indicator span {
            width: 8px;
            height: 8px;
            background: #999;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-10px);
            }
        }
        
        .quick-replies {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-top: 1rem;
            justify-content: center;
        }
        
        .quick-reply {
            background: #075E54; /* WhatsApp Green */
            color: white;
            padding: 0.75rem 1.25rem;
            border-radius: 24px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            border: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .quick-reply:hover {
            background: #128C7E; /* Darker WhatsApp Green */
            transform: scale(1.03);
        }
        
        /* Flow visualization */
        .flow-visualization {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 2rem 0;
            position: relative;
        }
        
        .flow-node {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            position: relative;
            z-index: 2;
            transition: all 0.3s ease;
        }
        
        .flow-node.active {
            transform: scale(1.2);
            box-shadow: 0 0 20px currentColor;
        }
        
        .flow-node.n8n {
            background: linear-gradient(135deg, #FF6B6B, #FF8E53);
        }
        
        .flow-node.flowise {
            background: linear-gradient(135deg, #4E54C8, #8F94FB);
        }
        
        .flow-node.supabase {
            background: linear-gradient(135deg, #3ECF8E, #1EBB8E);
        }
        
        .flow-node.whatsapp {
            background: linear-gradient(135deg, #25D366, #128C7E);
        }
        
        .flow-line {
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            flex: 1;
            margin: 0 1rem;
            border-radius: 2px;
            position: relative;
            overflow: hidden;
        }
        
        .flow-line::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
            animation: flowAnimation 2s infinite;
        }
        
        @keyframes flowAnimation {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        /* WallyUp App mejorada */
        .wallyup-app {
            width: 320px;
            height: 640px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 30px;
            padding: 10px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .app-header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 1rem;
            border-radius: 20px 20px 0 0;
            text-align: center;
            color: white;
        }
        
        .app-content {
            background: white;
            height: calc(100% - 60px);
            border-radius: 0 0 20px 20px;
            padding: 1rem;
            overflow-y: auto;
        }
        
        .balance-card {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1.5rem;
            border-radius: 16px;
            margin-bottom: 1rem;
            box-shadow: 0 8px 16px rgba(124, 58, 237, 0.3);
        }
        
        .balance-amount {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        
        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem;
            background: rgba(124, 58, 237, 0.05);
            border-radius: 8px;
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
        }
        
        .transaction-item:hover {
            background: rgba(124, 58, 237, 0.1);
            transform: translateX(5px);
        }
        
        .transaction-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
        }
        
        .transaction-icon.income {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success);
        }
        
        .transaction-icon.expense {
            background: rgba(236, 72, 153, 0.2);
            color: var(--secondary);
        }
        
        .transaction-details {
            flex: 1;
        }
        
        .transaction-name {
            font-weight: bold;
            color: #303030;
        }
        
        .transaction-date {
            font-size: 0.8rem;
            color: #666;
        }
        
        .transaction-amount {
            font-weight: bold;
        }
        
        .transaction-amount.income {
            color: var(--success);
        }
        
        .transaction-amount.expense {
            color: var(--secondary);
        }
        
        /* Dashboard mejorado */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .dashboard-card {
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.1), rgba(236, 72, 153, 0.1));
            border: 1px solid rgba(124, 58, 237, 0.2);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .dashboard-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transition: left 0.8s ease;
        }

        .dashboard-card:hover::before {
            left: 100%;
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(124, 58, 237, 0.2);
            border-color: var(--primary);
        }

        .dashboard-title {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 1rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .dashboard-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
        }

        .platform-name {
            display: block;
            font-size: 1.5rem;
            margin-bottom: 0.25rem;
        }

        .platform-count, .advertiser-campaigns {
            font-size: 0.9rem;
            opacity: 0.8;
            font-weight: normal;
        }

        .metric-value {
            display: inline-block;
            transition: all 0.5s ease;
        }

        .dashboard-change {
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .dashboard-change.positive {
            color: var(--success);
        }

        .dashboard-change.negative {
            color: var(--secondary);
        }

        /* Animación de conteo */
        @keyframes countUp {
            from {
                opacity: 0;
                transform: scale(0.5);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .metric-value.counting {
            animation: countUp 0.5s ease-out;
        }

        /* Estados de carga para el dashboard */
        .dashboard-card.loading {
            opacity: 0.6;
            pointer-events: none;
        }

        .dashboard-card.loading .dashboard-value::after {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top: 2px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Loading overlay global */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(13, 10, 31, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            backdrop-filter: blur(10px);
        }

        .loading-overlay.active {
            display: flex;
        }

        .loading-content {
            text-align: center;
            color: white;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(124, 58, 237, 0.3);
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem auto;
        }

        .loading-text {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }

        .loading-subtext {
            font-size: 0.9rem;
            opacity: 0.7;
        }

        /* Estados de carga para botones */
        .btn.loading {
            position: relative;
            color: transparent;
            pointer-events: none;
        }

        .btn.loading::after {
            content: '';
            position: absolute;
            width: 16px;
            height: 16px;
            top: 50%;
            left: 50%;
            margin-left: -8px;
            margin-top: -8px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        /* Toast notifications */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10001;
        }

        .toast {
            background: linear-gradient(135deg, var(--dark-card), rgba(124, 58, 237, 0.1));
            border: 1px solid rgba(124, 58, 237, 0.3);
            border-radius: 12px;
            padding: 1rem 1.5rem;
            margin-bottom: 1rem;
            min-width: 300px;
            display: flex;
            align-items: center;
            gap: 1rem;
            color: white;
            animation: slideInRight 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .toast.success {
            border-color: var(--success);
        }

        .toast.error {
            border-color: var(--secondary);
        }

        .toast.info {
            border-color: var(--info);
        }

        .toast-icon {
            font-size: 1.5rem;
        }

        .toast.success .toast-icon {
            color: var(--success);
        }

        .toast.error .toast-icon {
            color: var(--secondary);
        }

        .toast.info .toast-icon {
            color: var(--info);
        }

        .toast-content {
            flex: 1;
        }

        .toast-title {
            font-weight: bold;
            margin-bottom: 0.25rem;
        }

        .toast-message {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .toast-close {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.2rem;
            cursor: pointer;
            padding: 0.25rem;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .toast-close:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }

        /* Progres indicators */
        .progress-bar {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 2px;
            transition: width 0.3s ease;
            width: 0%;
        }

        /* Skeleton loaders */
        .skeleton {
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1));
            background-size: 200% 100%;
            animation: skeleton-loading 1.5s infinite;
            border-radius: 4px;
        }

        @keyframes skeleton-loading {
            0% {
                background-position: 200% 0;
            }
            100% {
                background-position: -200% 0;
            }
        }

        .skeleton-text {
            height: 1rem;
            margin-bottom: 0.5rem;
        }

        .skeleton-text.title {
            height: 1.5rem;
            width: 60%;
        }

        .skeleton-text.subtitle {
            width: 40%;
        }

        .skeleton-text.small {
            height: 0.8rem;
            width: 30%;
        }
        
        /* Document automation mejorado */
        .doc-flow {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
            padding: 2rem 0;
        }
        
        .doc-step {
            display: flex;
            align-items: center;
            width: 100%;
            max-width: 600px;
            position: relative;
        }
        
        .doc-icon {
            width: 80px;
            height: 80px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            margin-right: 1.5rem;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .doc-icon:hover {
            transform: scale(1.1) rotate(5deg);
        }
        
        .doc-icon.excel {
            background: linear-gradient(135deg, #217346, #107C41);
        }
        
        .doc-icon.process {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }
        
        .doc-icon.word {
            background: linear-gradient(135deg, #2B579A, #185ABD);
        }
        
        .doc-icon.pdf {
            background: linear-gradient(135deg, #FF0000, #CC0000);
        }
        
        .doc-icon.email {
            background: linear-gradient(135deg, #EA4335, #D93025);
        }
        
        .doc-content {
            flex: 1;
        }
        
        .doc-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }
        
        .doc-description {
            color: var(--accent);
            line-height: 1.5;
        }
        
        .doc-arrow {
            position: absolute;
            left: 40px;
            top: 80px;
            color: var(--primary);
            font-size: 2rem;
            opacity: 0.5;
        }
        
        /* Botón flotante */
        .floating-btn {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(124, 58, 237, 0.4);
            transition: all 0.3s ease;
            z-index: 100;
        }
        
        .floating-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(124, 58, 237, 0.6);
        }
        
        /* Navegación */
        nav {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 1rem 2rem;
            background: rgba(13, 10, 31, 0.8);
            backdrop-filter: blur(10px);
            z-index: 100;
            transition: all 0.3s ease;
            border-bottom: 1px solid rgba(124, 58, 237, 0.2);
        }

        nav.scrolled {
            padding: 0.5rem 2rem;
            background: rgba(13, 10, 31, 0.95);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-logo {
            font-size: 1.5rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-link {
            color: white;
            text-decoration: none;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transition: width 0.3s ease;
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .nav-link:hover {
            color: var(--primary);
        }

        /* Menú móvil */
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .mobile-menu-btn:hover {
            background: rgba(124, 58, 237, 0.2);
        }

        .mobile-menu {
            position: fixed;
            top: 0;
            right: -100%;
            width: 280px;
            height: 100vh;
            background: linear-gradient(135deg, rgba(13, 10, 31, 0.98), rgba(26, 21, 49, 0.98));
            backdrop-filter: blur(20px);
            border-left: 1px solid rgba(124, 58, 237, 0.3);
            z-index: 1000;
            transition: all 0.3s ease;
            overflow-y: auto;
        }

        .mobile-menu.active {
            right: 0;
        }

        .mobile-menu-header {
            padding: 2rem;
            border-bottom: 1px solid rgba(124, 58, 237, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .mobile-menu-logo {
            font-size: 1.5rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .mobile-menu-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .mobile-menu-close:hover {
            background: rgba(236, 72, 153, 0.2);
        }

        .mobile-menu-links {
            padding: 2rem 1rem;
        }

        .mobile-nav-link {
            display: block;
            color: white;
            text-decoration: none;
            padding: 1rem;
            margin: 0.5rem 0;
            border-radius: 12px;
            transition: all 0.3s ease;
            font-size: 1.1rem;
        }

        .mobile-nav-link:hover {
            background: rgba(124, 58, 237, 0.2);
            transform: translateX(5px);
        }

        .mobile-menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .mobile-menu-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        /* Sección Hero */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 2rem;
            position: relative;
            background: radial-gradient(circle at 50% 50%, rgba(124, 58, 237, 0.1), transparent 70%);
        }
        
        .hero-content {
            max-width: 800px;
            text-align: center;
            z-index: 1;
        }
        
        .hero-title {
            font-size: 3.5rem;
            font-weight: bold;
            margin-bottom: 1rem;
            line-height: 1.2;
        }
        
        .hero-subtitle {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            color: var(--accent);
        }
        
        .hero-description {
            font-size: 1.1rem;
            margin-bottom: 2rem;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .hero-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: bold;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(124, 58, 237, 0.4);
        }
        
        .btn-secondary {
            background: transparent;
            color: white;
            border: 1px solid var(--primary);
        }
        
        .btn-secondary:hover {
            background: rgba(124, 58, 237, 0.1);
            transform: translateY(-2px);
        }
        
        .btn-cv {
            background: linear-gradient(135deg, var(--accent), var(--success));
            color: white;
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
        }
        
        .btn-cv:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);
        }
        
        /* Sección de Proyectos */
        .projects {
            padding: 5rem 2rem;
            background: linear-gradient(180deg, transparent, rgba(124, 58, 237, 0.05));
        }
        
        .section-title {
            font-size: 2.5rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .project-card {
            padding: 1.5rem;
            position: relative;
        }
        
        .project-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 1rem;
            color: var(--primary);
        }
        
        .project-description {
            margin-bottom: 1.5rem;
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
        }
        
        .project-tech {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }
        
        .tech-tag {
            background: rgba(124, 58, 237, 0.1);
            color: var(--primary);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.875rem;
            border: 1px solid rgba(124, 58, 237, 0.2);
            transition: all 0.3s ease;
        }
        
        .tech-tag:hover {
            background: rgba(124, 58, 237, 0.2);
            transform: scale(1.05);
        }
        
        .project-link {
            color: var(--primary);
            text-decoration: none;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }
        
        .project-link:hover {
            color: var(--secondary);
            transform: translateX(5px);
        }
        
        /* Sección de Stack Tecnológico */
        .tech-stack {
            padding: 5rem 2rem;
            background: linear-gradient(180deg, rgba(124, 58, 237, 0.05), rgba(236, 72, 153, 0.05));
        }
        
        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Tech Stack Carousel */
        .tech-carousel-container {
            overflow: hidden;
            position: relative;
            width: 100%;
            -webkit-mask-image: linear-gradient(to right, transparent, white 20%, white 80%, transparent);
            mask-image: linear-gradient(to right, transparent, white 20%, white 80%, transparent);
        }

        .tech-carousel-track {
            display: flex;
            width: calc(2 * (120px * 12 + 2rem * 12)); /* (card width * num cards + gap * num cards) * 2 */
            animation: scroll 40s linear infinite;
        }

        .tech-carousel-track:hover {
            animation-play-state: paused;
        }

        @keyframes scroll {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(calc(-1 * (120px * 12 + 2rem * 12)));
            }
        }

        
        /* Sección de Contacto */
        .contact {
            padding: 5rem 2rem;
            text-align: center;
            background: linear-gradient(180deg, rgba(236, 72, 153, 0.05), transparent);
        }
        
        .contact-content {
            max-width: 600px;
            margin: 0 auto;
        }
        
        .contact-description {
            margin-bottom: 2rem;
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
        }
        
        .contact-links {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }
        
        .contact-link {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            background: rgba(124, 58, 237, 0.1);
            border-radius: 50%;
            color: var(--primary);
            font-size: 1.5rem;
            transition: all 0.3s ease;
            border: 1px solid rgba(124, 58, 237, 0.2);
        }
        
        .contact-link:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(124, 58, 237, 0.3);
        }
        
        /* Footer */
        footer {
            padding: 2rem;
            text-align: center;
            color: rgba(255, 255, 255, 0.6);
            border-top: 1px solid rgba(124, 58, 237, 0.2);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }

            .hero-subtitle {
                font-size: 1.2rem;
            }

            .nav-links {
                display: none;
            }

            .mobile-menu-btn {
                display: block;
            }

            .projects-grid {
                grid-template-columns: 1fr;
            }

            .tech-grid {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            /* Demo containers responsivos */
            .demo-content {
                width: 95%;
                max-height: 90vh;
                padding: 1rem;
            }

            /* Chat demo móvil */
            .chat-container {
                height: 400px;
                border-radius: 8px;
            }

            /* WallyUp app móvil */
            .wallyup-app {
                width: 280px;
                height: 560px;
            }

            /* Dashboard móvil */
            .dashboard-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            /* Gráficos móviles */
            .dashboard-value {
                font-size: 1.5rem;
            }

            /* Flujo E-Commerce móvil */
            .flow-visualization {
                flex-direction: column;
                gap: 1rem;
            }

            .flow-node {
                width: 60px;
                height: 60px;
                font-size: 1.2rem;
            }

            .flow-line {
                width: 4px;
                height: 40px;
                margin: 0.5rem 0;
            }

            /* Document flow móvil */
            .doc-step {
                flex-direction: column;
                text-align: center;
                margin-bottom: 2rem;
            }

            .doc-icon {
                margin: 0 auto 1rem auto;
            }

            .doc-arrow {
                left: 50%;
                transform: translateX(-50%);
                top: 90px;
            }
        }
    </style>
</head>
<body>
    <!-- Fondo con partículas -->
    <div id="particles-bg"></div>
    
    <!-- Navegación -->
    <nav id="navbar">
        <div class="nav-container">
            <div class="nav-logo">JG</div>
            <div class="nav-links">
                <a href="#home" class="nav-link">Inicio</a>
                <a href="#projects" class="nav-link">Proyectos</a>
                <a href="#tech" class="nav-link">Stack</a>
                <a href="#contact" class="nav-link">Contacto</a>
            </div>
            <button class="mobile-menu-btn" id="mobile-menu-btn">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <!-- Menú móvil -->
    <div class="mobile-menu-overlay" id="mobile-menu-overlay"></div>
    <div class="mobile-menu" id="mobile-menu">
        <div class="mobile-menu-header">
            <div class="mobile-menu-logo">JG</div>
            <button class="mobile-menu-close" id="mobile-menu-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="mobile-menu-links">
            <a href="#home" class="mobile-nav-link" onclick="closeMobileMenu()">
                <i class="fas fa-home"></i> Inicio
            </a>
            <a href="#projects" class="mobile-nav-link" onclick="closeMobileMenu()">
                <i class="fas fa-briefcase"></i> Proyectos
            </a>
            <a href="#tech" class="mobile-nav-link" onclick="closeMobileMenu()">
                <i class="fas fa-code"></i> Stack
            </a>
            <a href="#contact" class="mobile-nav-link" onclick="closeMobileMenu()">
                <i class="fas fa-envelope"></i> Contacto
            </a>
        </div>
    </div>
    
    <!-- Sección Hero -->
    <section id="home" class="hero">
        <div class="hero-content fade-in">
            <h1 class="hero-title gradient-text">José Garza</h1>
            <h2 class="hero-subtitle gradient-text-alt">Desarrollador Full Stack y Especialista en Automatización</h2>
            <p class="hero-description">
                Apasionado por crear soluciones inteligentes que combinan IA, automatización y diseño escalable. Transformo ideas en sistemas funcionales que optimizan procesos y potencian la productividad.
            </p>
            <div class="hero-buttons">
                <a href="#projects" class="btn btn-primary">
                    <i class="fas fa-briefcase"></i> Ver Proyectos
                </a>
                <a href="CV.pdf" download="CV_Jose_Garza.pdf" class="btn btn-cv">
                    <i class="fas fa-download"></i> Descargar CV
                </a>
                <a href="#contact" class="btn btn-secondary">
                    <i class="fas fa-envelope"></i> Contactar
                </a>
            </div>
        </div>
    </section>
    
    <!-- Sección de Proyectos -->
    <section id="projects" class="projects">
        <h2 class="section-title gradient-text">Proyectos Destacados</h2>
        <div class="projects-grid">
            <!-- Proyecto 1: WallyUp -->
            <div class="project-card fade-in">
                <h3 class="project-title">WallyUp - Asistente Financiero Móvil</h3>
                <p class="project-description">
                    Aplicación móvil multiplataforma para gestión de finanzas personales con asistente de IA conversacional.
                </p>
                <div class="project-tech">
                    <span class="tech-tag"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/flutter/flutter-original.svg" alt="Flutter" style="width: 1em; height: 1em; display: inline-block; vertical-align: middle;"> Flutter</span>
                    <span class="tech-tag"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/dart/dart-original.svg" alt="Dart" style="width: 1em; height: 1em; display: inline-block; vertical-align: middle;"> Dart</span>
                    <span class="tech-tag"><i class="fas fa-project-diagram"></i> Riverpod</span>
                    <span class="tech-tag"><i class="fas fa-database"></i> Supabase</span>
                    <span class="tech-tag"><i class="fas fa-brain"></i> Google Gemini</span>
                </div>
                <a href="#" class="project-link" onclick="openDemo('wallyup'); return false;">
                    Ver Demo <i class="fas fa-arrow-right"></i>
                </a>
            </div>
            
            <!-- Proyecto 2: GMDScriptsAFC -->
            <div class="project-card fade-in">
                <h3 class="project-title">Sistema de Automatización de Documentos</h3>
                <p class="project-description">
                    Aplicación de escritorio que automatiza la generación masiva de documentos legales y administrativos.
                </p>
                <div class="project-tech">
                    <span class="tech-tag"><i class="fab fa-python"></i> Python</span>
                    <span class="tech-tag"><i class="fas fa-desktop"></i> PyQt5</span>
                    <span class="tech-tag"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/pandas/pandas-original.svg" alt="Pandas" style="width: 1em; height: 1em; display: inline-block; vertical-align: middle;"> Pandas</span>
                    <span class="tech-tag"><i class="fas fa-file-word"></i> python-docx</span>
                    <span class="tech-tag"><i class="fas fa-box-open"></i> PyInstaller</span>
                </div>
                <a href="#" class="project-link" onclick="openDemo('docs'); return false;">
                    Ver Demo <i class="fas fa-arrow-right"></i>
                </a>
            </div>
            
            <!-- Proyecto 3: Allianz Portfolio Intelligence -->
            <div class="project-card fade-in">
                <h3 class="project-title">Asesor Financiero con IA</h3>
                <p class="project-description">
                    Aplicación web que actúa como asesor de inversiones personal, recomendando portafolios optimizados.
                </p>
                <div class="project-tech">
                    <span class="tech-tag"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/fastapi/fastapi-original.svg" alt="FastAPI" style="width: 1em; height: 1em; display: inline-block; vertical-align: middle;"> FastAPI</span>
                    <span class="tech-tag"><i class="fab fa-react"></i> React</span>
                    <span class="tech-tag"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/typescript/typescript-original.svg" alt="TypeScript" style="width: 1em; height: 1em; display: inline-block; vertical-align: middle;"> TypeScript</span>
                    <span class="tech-tag"><i class="fas fa-brain"></i> Google Gemini</span>
                    <span class="tech-tag"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/numpy/numpy-original.svg" alt="NumPy" style="width: 1em; height: 1em; display: inline-block; vertical-align: middle;"> NumPy</span>
                </div>
                <a href="#" class="project-link" onclick="openDemo('advisor'); return false;">
                    Ver Demo <i class="fas fa-arrow-right"></i>
                </a>
            </div>
            
            <!-- Proyecto 4: Advantage Scrapping Ads -->
            <div class="project-card fade-in">
                <h3 class="project-title">Dashboard de Inteligencia de Anuncios</h3>
                <p class="project-description">
                    Sistema autónomo de inteligencia de mercado que realiza web scraping en múltiples plataformas.
                </p>
                <div class="project-tech">
                    <span class="tech-tag"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/fastapi/fastapi-original.svg" alt="FastAPI" style="width: 1em; height: 1em; display: inline-block; vertical-align: middle;"> FastAPI</span>
                    <span class="tech-tag"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/streamlit/streamlit-original.svg" alt="Streamlit" style="width: 1em; height: 1em; display: inline-block; vertical-align: middle;"> Streamlit</span>
                    <span class="tech-tag"><i class="fas fa-database"></i> PostgreSQL</span>
                    <span class="tech-tag"><i class="fas fa-spider"></i> Scrapy</span>
                    <span class="tech-tag"><i class="fas fa-mouse-pointer"></i> Playwright</span>
                </div>
                <a href="#" class="project-link" onclick="openDemo('dashboard'); return false;">
                    Ver Demo <i class="fas fa-arrow-right"></i>
                </a>
            </div>
            
            <!-- Proyecto 5: Linnia -->
            <div class="project-card fade-in">
                <h3 class="project-title">E-Commerce Conversacional End-to-End</h3>
                <p class="project-description">
                    Sistema conversacional completo para e-commerce que opera a través de WhatsApp sin intervención humana.
                </p>
                <div class="project-tech">
                    <span class="tech-tag"><i class="fas fa-project-diagram"></i> n8n</span>
                    <span class="tech-tag"><i class="fas fa-comments"></i> Flowise</span>
                    <span class="tech-tag"><i class="fas fa-robot"></i> GPT-4</span>
                    <span class="tech-tag"><i class="fas fa-database"></i> Supabase</span>
                    <span class="tech-tag"><i class="fab fa-whatsapp"></i> WhatsApp API</span>
                </div>
                <a href="#" class="project-link" onclick="openDemo('ecommerce'); return false;">
                    Ver Demo <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>
    </section>
    
    <!-- Sección de Stack Tecnológico -->
    <section id="tech" class="tech-stack">
        <h2 class="section-title gradient-text">Stack Tecnológico</h2>
        <div class="tech-carousel-container">
            <div class="tech-carousel-track">
                <!-- Original Items -->
                <div class="tech-card fade-in"><i class="fab fa-python tech-icon python"></i><span>Python</span></div>
                <div class="tech-card fade-in"><i class="fab fa-js tech-icon javascript"></i><span>JavaScript</span></div>
                <div class="tech-card fade-in"><i class="fab fa-react tech-icon react"></i><span>React</span></div>
                <div class="tech-card fade-in"><i class="fab fa-node tech-icon node"></i><span>Node.js</span></div>
                <div class="tech-card fade-in"><i class="fab fa-docker tech-icon docker"></i><span>Docker</span></div>
                <div class="tech-card fade-in"><i class="fas fa-database tech-icon database"></i><span>PostgreSQL</span></div>
                <div class="tech-card fade-in"><i class="fab fa-google tech-icon google"></i><span>Google Cloud</span></div>
                <div class="tech-card fade-in"><i class="fas fa-robot tech-icon robot"></i><span>OpenAI</span></div>
                <div class="tech-card fade-in"><i class="fas fa-brain tech-icon brain"></i><span>Google Gemini</span></div>
                <div class="tech-card fade-in"><i class="fas fa-project-diagram tech-icon workflow"></i><span>n8n</span></div>
                <div class="tech-card fade-in"><i class="fas fa-comments tech-icon comments"></i><span>Flowise</span></div>
                <div class="tech-card fade-in"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/flutter/flutter-original.svg" alt="Flutter" style="width: 40px; height: 40px;"><span>Flutter</span></div>
                <!-- Duplicated Items -->
                <div class="tech-card fade-in"><i class="fab fa-python tech-icon python"></i><span>Python</span></div>
                <div class="tech-card fade-in"><i class="fab fa-js tech-icon javascript"></i><span>JavaScript</span></div>
                <div class="tech-card fade-in"><i class="fab fa-react tech-icon react"></i><span>React</span></div>
                <div class="tech-card fade-in"><i class="fab fa-node tech-icon node"></i><span>Node.js</span></div>
                <div class="tech-card fade-in"><i class="fab fa-docker tech-icon docker"></i><span>Docker</span></div>
                <div class="tech-card fade-in"><i class="fas fa-database tech-icon database"></i><span>PostgreSQL</span></div>
                <div class="tech-card fade-in"><i class="fab fa-google tech-icon google"></i><span>Google Cloud</span></div>
                <div class="tech-card fade-in"><i class="fas fa-robot tech-icon robot"></i><span>OpenAI</span></div>
                <div class="tech-card fade-in"><i class="fas fa-brain tech-icon brain"></i><span>Google Gemini</span></div>
                <div class="tech-card fade-in"><i class="fas fa-project-diagram tech-icon workflow"></i><span>n8n</span></div>
                <div class="tech-card fade-in"><i class="fas fa-comments tech-icon comments"></i><span>Flowise</span></div>
                <div class="tech-card fade-in"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/flutter/flutter-original.svg" alt="Flutter" style="width: 40px; height: 40px;"><span>Flutter</span></div>
            </div>
        </div>
    </section>
    
    <!-- Sección de Contacto -->
    <section id="contact" class="contact">
        <div class="contact-content fade-in">
            <h2 class="section-title gradient-text">Contacto</h2>
            <p class="contact-description">
                ¿Interesado en colaborar o tienes alguna pregunta? No dudes en contactarme.
            </p>
            <div class="contact-links">
                <a href="mailto:jgarza.cloud@gmail.com" class="contact-link">
                    <i class="fas fa-envelope"></i>
                </a>
                <a href="https://github.com/josegarza1" target="_blank" class="contact-link">
                    <i class="fab fa-github"></i>
                </a>
                <a href="https://www.linkedin.com/in/josegarza1" target="_blank" class="contact-link">
                    <i class="fab fa-linkedin"></i>
                </a>
                <a href="tel:+528123321007" class="contact-link">
                    <i class="fas fa-phone"></i>
                </a>
            </div>
        </div>
    </section>
    
    <!-- Footer -->
    <footer>
        <p>&copy; 2025 José Garza. Todos los derechos reservados.</p>
    </footer>

    <!-- Botón flotante -->
    <div class="floating-btn" id="scrollToTop">
        <i class="fas fa-arrow-up"></i>
    </div>

    <!-- Loading Overlay Global -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">Cargando...</div>
            <div class="loading-subtext">Por favor, espera un momento</div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>
    
    <!-- Demo Containers -->
    <!-- Demo 1: WallyUp -->
    <div id="wallyup-demo" class="demo-container">
        <div class="demo-content">
            <button class="close-demo" onclick="closeDemo('wallyup')">&times;</button>
            <h2 class="section-title gradient-text">WallyUp - Asistente Financiero Móvil</h2>
            <div class="glass" style="padding: 1.5rem; margin-bottom: 1.5rem;">
                <p>Esta demo simula la experiencia de usuario dentro de la app móvil WallyUp, mostrando cómo interactuar con el asistente de IA para registrar transacciones y consultar saldos.</p>
            </div>
            <div style="display: flex; justify-content: center;">
                <div class="wallyup-app">
                    <div class="app-header">
                        <h3>WallyUp</h3>
                    </div>
                    <div class="app-content">
                        <div class="balance-card">
                            <div class="balance-amount">$2,350.00</div>
                            <div>Saldo Total</div>
                        </div>
                        
                        <h4 style="margin-bottom: 1rem; color: #303030;">Transacciones Recientes</h4>
                        
                        <div class="transaction-item">
                            <div class="transaction-icon expense">
                                <i class="fas fa-shopping-cart"></i>
                            </div>
                            <div class="transaction-details">
                                <div class="transaction-name">Supermercado</div>
                                <div class="transaction-date">Hoy, 14:30</div>
                            </div>
                            <div class="transaction-amount expense">-$500</div>
                        </div>
                        
                        <div class="transaction-item">
                            <div class="transaction-icon income">
                                <i class="fas fa-briefcase"></i>
                            </div>
                            <div class="transaction-details">
                                <div class="transaction-name">Salario</div>
                                <div class="transaction-date">Ayer, 09:00</div>
                            </div>
                            <div class="transaction-amount income">+$3,000</div>
                        </div>
                        
                        <div class="transaction-item">
                            <div class="transaction-icon expense">
                                <i class="fas fa-gas-pump"></i>
                            </div>
                            <div class="transaction-details">
                                <div class="transaction-name">Gasolina</div>
                                <div class="transaction-date">Ayer, 18:45</div>
                            </div>
                            <div class="transaction-amount expense">-$750</div>
                        </div>
                        
                        <div class="transaction-item">
                            <div class="transaction-icon expense">
                                <i class="fas fa-utensils"></i>
                            </div>
                            <div class="transaction-details">
                                <div class="transaction-name">Restaurante</div>
                                <div class="transaction-date">2 días atrás</div>
                            </div>
                            <div class="transaction-amount expense">-$350</div>
                        </div>
                        
                        <div style="margin-top: 2rem; padding: 1rem; background: rgba(124, 58, 237, 0.1); border-radius: 12px;">
                            <h4 style="margin-bottom: 0.5rem; color: var(--primary);">Asistente de IA</h4>
                            <div style="background: white; padding: 0.75rem; border-radius: 8px; margin-bottom: 0.5rem;">
                                <p style="color: #303030; font-size: 0.9rem;">¡Hola! He registrado tu gasto de $500 en supermercado. Tu saldo actual es de $2,350.</p>
                            </div>
                            <div style="background: #DCF8C6; padding: 0.75rem; border-radius: 8px; margin-left: auto; max-width: 80%;">
                                <p style="color: #303030; font-size: 0.9rem;">¿Cuánto he gastado esta semana?</p>
                            </div>
                            <div style="background: white; padding: 0.75rem; border-radius: 8px; margin-top: 0.5rem;">
                                <p style="color: #303030; font-size: 0.9rem;">Esta semana has gastado $1,250. Tu mayor gasto fue en "Supermercado" con $500.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Demo 2: Document Automation -->
    <div id="docs-demo" class="demo-container">
        <div class="demo-content">
            <button class="close-demo" onclick="closeDemo('docs')">&times;</button>
            <h2 class="section-title gradient-text">Sistema de Automatización de Documentos</h2>
            <div class="glass" style="padding: 1.5rem; margin-bottom: 1.5rem;">
                <p>Esta demo visualiza el proceso ETL (Extracción, Transformación y Carga) que realiza el sistema para automatizar la generación de documentos.</p>
            </div>
            <div class="doc-flow">
                <div class="doc-step">
                    <div class="doc-icon excel">
                        <i class="fas fa-file-excel"></i>
                    </div>
                    <div class="doc-content">
                        <div class="doc-title">Extracción de Datos</div>
                        <div class="doc-description">El sistema lee miles de registros desde archivos Excel con Pandas</div>
                    </div>
                    <div class="doc-arrow">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
                
                <div class="doc-step">
                    <div class="doc-icon process">
                        <i class="fas fa-cogs"></i>
                    </div>
                    <div class="doc-content">
                        <div class="doc-title">Procesamiento Inteligente</div>
                        <div class="doc-description">Los datos son validados, limpiados y transformados usando algoritmos de Python</div>
                    </div>
                    <div class="doc-arrow">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
                
                <div class="doc-step">
                    <div class="doc-icon word">
                        <i class="fas fa-file-word"></i>
                    </div>
                    <div class="doc-content">
                        <div class="doc-title">Generación de Documentos</div>
                        <div class="doc-description">Se insertan los datos en plantillas de Word personalizadas con python-docx</div>
                    </div>
                    <div class="doc-arrow">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
                
                <div class="doc-step">
                    <div class="doc-icon pdf">
                        <i class="fas fa-file-pdf"></i>
                    </div>
                    <div class="doc-content">
                        <div class="doc-title">Conversión Automática</div>
                        <div class="doc-description">Los documentos se convierten a PDF para su distribución y archivo</div>
                    </div>
                    <div class="doc-arrow">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
                
                <div class="doc-step">
                    <div class="doc-icon email">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <div class="doc-content">
                        <div class="doc-title">Distribución Automatizada</div>
                        <div class="doc-description">Los documentos se envían automáticamente a los destinatarios correspondientes</div>
                    </div>
                </div>
                
                <button class="btn btn-primary" style="margin-top: 2rem;" onclick="animateDocFlow()">
                    <i class="fas fa-play"></i> Iniciar Simulación
                </button>
            </div>
        </div>
    </div>
    
    <!-- Demo 3: Financial Advisor -->
    <div id="advisor-demo" class="demo-container">
        <div class="demo-content">
            <button class="close-demo" onclick="closeDemo('advisor')">&times;</button>
            <h2 class="section-title gradient-text">Asesor Financiero con IA</h2>
            <div class="glass" style="padding: 1.5rem; margin-bottom: 1.5rem;">
                <p>Esta demo muestra cómo el asesor financiero recomienda portafolios de inversión optimizados según el perfil de riesgo del usuario.</p>
            </div>
            <div style="display: flex; flex-direction: column; align-items: center;">
                <select class="advisor-dropdown" id="risk-profile" onchange="updateChart()" style="padding: 0.75rem 1.5rem; background: var(--dark-card); color: white; border: 1px solid var(--primary); border-radius: 8px; margin-bottom: 2rem; font-size: 1rem;">
                    <option value="conservative">Perfil Conservador</option>
                    <option value="moderate">Perfil Moderado</option>
                    <option value="aggressive">Perfil Agresivo</option>
                </select>
                <div style="width: 350px; height: 350px; margin-bottom: 2rem;">
                    <canvas id="portfolio-chart"></canvas>
                </div>
                <div class="glass-accent" style="padding: 1.5rem; max-width: 600px; text-align: center;" id="recommendation">
                    <h3 style="margin-bottom: 1rem; color: var(--secondary);">Recomendación para Perfil Conservador</h3>
                    <p style="line-height: 1.6;">Basado en tu perfil de riesgo conservador, te recomendamos una cartera con 60% en bonos, 30% en acciones de grandes empresas y 10% en efectivo. Esta distribución busca preservar tu capital con un crecimiento moderado y bajo riesgo.</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Demo 4: Dashboard -->
    <div id="dashboard-demo" class="demo-container">
        <div class="demo-content">
            <button class="close-demo" onclick="closeDemo('dashboard')">&times;</button>
            <h2 class="section-title gradient-text">Dashboard de Inteligencia de Anuncios</h2>
            <div class="glass" style="padding: 1.5rem; margin-bottom: 1.5rem;">
                <p>Esta demo simula el dashboard interactivo que muestra datos de anuncios recopilados mediante web scraping.</p>
            </div>
            
            <div class="dashboard-grid" id="dashboard-grid">
                <div class="dashboard-card" data-metric="total-ads">
                    <div class="dashboard-title">
                        <i class="fas fa-bullhorn"></i> Total de Anuncios
                    </div>
                    <div class="dashboard-value" style="color: var(--primary);">
                        <span class="metric-value" data-target="281">0</span>
                    </div>
                    <div class="dashboard-change positive">
                        <i class="fas fa-arrow-up"></i> +12.5% vs mes anterior
                    </div>
                </div>

                <div class="dashboard-card" data-metric="platform">
                    <div class="dashboard-title">
                        <i class="fas fa-crown"></i> Plataforma Principal
                    </div>
                    <div class="dashboard-value" style="color: var(--secondary);">
                        <span class="platform-name">Google</span>
                        <div class="platform-count">125 anuncios</div>
                    </div>
                    <div class="dashboard-change positive">
                        <i class="fas fa-arrow-up"></i> +8.3% crecimiento
                    </div>
                </div>

                <div class="dashboard-card" data-metric="growth">
                    <div class="dashboard-title">
                        <i class="fas fa-chart-line"></i> Tasa de Crecimiento
                    </div>
                    <div class="dashboard-value" style="color: var(--accent);">
                        <span class="metric-value" data-target="24">0</span>%
                    </div>
                    <div class="dashboard-change positive">
                        <i class="fas fa-arrow-up"></i> Últimos 7 días
                    </div>
                </div>

                <div class="dashboard-card" data-metric="top-advertiser">
                    <div class="dashboard-title">
                        <i class="fas fa-trophy"></i> Anunciante Top
                    </div>
                    <div class="dashboard-value" style="color: var(--success);">
                        <span class="advertiser-name">TechStore</span>
                        <div class="advertiser-campaigns">15 campañas</div>
                    </div>
                    <div class="dashboard-change positive">
                        <i class="fas fa-arrow-up"></i> +25% inversión
                    </div>
                </div>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                <div class="glass" style="padding: 1.5rem;">
                    <h3 style="margin-bottom: 1rem; color: var(--primary);">Anuncios por Plataforma</h3>
                    <canvas id="platform-chart"></canvas>
                </div>
                <div class="glass" style="padding: 1.5rem;">
                    <h3 style="margin-bottom: 1rem; color: var(--secondary);">Tendencia Semanal</h3>
                    <canvas id="trend-chart"></canvas>
                </div>
            </div>
            
            <div class="glass" style="padding: 1.5rem; margin-top: 1.5rem;">
                <h3 style="margin-bottom: 1rem; color: var(--accent);">Anuncios Recientes</h3>
                <div style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="border-bottom: 2px solid var(--primary);">
                                <th style="text-align: left; padding: 0.75rem; color: var(--primary);">Plataforma</th>
                                <th style="text-align: left; padding: 0.75rem; color: var(--primary);">Anunciante</th>
                                <th style="text-align: left; padding: 0.75rem; color: var(--primary);">Texto del Anuncio</th>
                                <th style="text-align: left; padding: 0.75rem; color: var(--primary);">Fecha</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style="border-bottom: 1px solid rgba(124, 58, 237, 0.2); transition: all 0.3s ease;" onmouseover="this.style.backgroundColor='rgba(124, 58, 237, 0.05)'" onmouseout="this.style.backgroundColor='transparent'">
                                <td style="padding: 0.75rem;"><span style="background: linear-gradient(135deg, #4285F4, #34A853); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.85rem;">Google</span></td>
                                <td style="padding: 0.75rem; font-weight: bold;">TechStore</td>
                                <td style="padding: 0.75rem;">¡Oferta especial en laptops! 30% de descuento</td>
                                <td style="padding: 0.75rem; color: var(--accent);">2025-07-15</td>
                            </tr>
                            <tr style="border-bottom: 1px solid rgba(124, 58, 237, 0.2); transition: all 0.3s ease;" onmouseover="this.style.backgroundColor='rgba(124, 58, 237, 0.05)'" onmouseout="this.style.backgroundColor='transparent'">
                                <td style="padding: 0.75rem;"><span style="background: linear-gradient(135deg, #1877F2, #42B883); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.85rem;">Meta</span></td>
                                <td style="padding: 0.75rem; font-weight: bold;">FashionBrand</td>
                                <td style="padding: 0.75rem;">Nueva colección de verano. ¡Descúbrela ahora!</td>
                                <td style="padding: 0.75rem; color: var(--accent);">2025-07-14</td>
                            </tr>
                            <tr style="border-bottom: 1px solid rgba(124, 58, 237, 0.2); transition: all 0.3s ease;" onmouseover="this.style.backgroundColor='rgba(124, 58, 237, 0.05)'" onmouseout="this.style.backgroundColor='transparent'">
                                <td style="padding: 0.75rem;"><span style="background: linear-gradient(135deg, #0077B5, #0A66C2); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.85rem;">LinkedIn</span></td>
                                <td style="padding: 0.75rem; font-weight: bold;">BusinessSolutions</td>
                                <td style="padding: 0.75rem;">Optimiza tus procesos con nuestra herramienta de IA</td>
                                <td style="padding: 0.75rem; color: var(--accent);">2025-07-13</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Demo 5: E-Commerce -->
    <div id="ecommerce-demo" class="demo-container">
        <div class="demo-content">
            <button class="close-demo" onclick="closeDemo('ecommerce')">&times;</button>
            <h2 class="section-title gradient-text">E-Commerce Conversacional End-to-End</h2>
            <div class="glass" style="padding: 1.5rem; margin-bottom: 1.5rem;">
                <p>Esta demo recrea la experiencia de interactuar con el bot de ventas por WhatsApp, mostrando el flujo completo de n8n, Flowise y Supabase.</p>
            </div>
            
            <!-- Visualización del flujo -->
            <div class="flow-visualization">
                <div class="flow-node n8n" id="n8n-node">
                    <i class="fas fa-project-diagram"></i>
                </div>
                <div class="flow-line"></div>
                <div class="flow-node flowise" id="flowise-node">
                    <i class="fas fa-brain"></i>
                </div>
                <div class="flow-line"></div>
                <div class="flow-node supabase" id="supabase-node">
                    <i class="fas fa-database"></i>
                </div>
                <div class="flow-line"></div>
                <div class="flow-node whatsapp" id="whatsapp-node">
                    <i class="fab fa-whatsapp"></i>
                </div>
            </div>
            
            <div style="text-align: center; margin: 1rem 0;">
                <p style="color: var(--accent); font-size: 0.9rem;">Flujo: n8n → Flowise → Supabase → WhatsApp</p>
            </div>
            
            <!-- Chat de WhatsApp -->
            <div class="chat-container">
                <div class="chat-header">
                    <div class="chat-avatar">
                        <i class="fas fa-store"></i>
                    </div>
                    <div style="flex: 1;">
                        <div style="font-weight: bold;">Linnia Store</div>
                        <div style="font-size: 0.8rem; opacity: 0.8;">Bot de ventas</div>
                    </div>
                    <div class="cart-indicator" id="cart-indicator" style="display: none;">
                        0
                    </div>
                </div>
                <div class="chat-messages" id="chat-messages">
                    <div class="message bot-message">
                        ¡Hola! Bienvenido a Linnia. Soy tu asistente de compras personal. ¿Qué estás buscando hoy? 🛍️
                    </div>
                </div>
                <div class="chat-input-container" id="chat-input-container">
                    <div class="quick-replies">
                        <div class="quick-reply" onclick="sendQuickReply('show_catalog')">
                            <i class="fas fa-th"></i> Ver catálogo
                        </div>
                        <div class="quick-reply" onclick="sendQuickReply('show_offers')">
                            <i class="fas fa-tag"></i> Ofertas
                        </div>
                        <div class="quick-reply" onclick="sendQuickReply('track_order')">
                            <i class="fas fa-box"></i> Mi pedido
                        </div>
                        <div class="quick-reply" onclick="sendQuickReply('help')">
                            <i class="fas fa-question-circle"></i> Ayuda
                        </div>
                    </div>
                </div>
        </div>
    </div>
    
    <script>
        // Inicialización de Three.js para el fondo de partículas (optimizada)
        function initParticles() {
            // Verificar si Three.js está disponible
            if (typeof THREE === 'undefined') {
                console.warn('Three.js not loaded yet');
                return;
            }

            // Detectar capabilities del dispositivo para optimización
            const isMobile = window.innerWidth <= 768;
            const isLowEnd = navigator.hardwareConcurrency <= 2 || navigator.deviceMemory <= 2;

            // Ajustar cantidad de partículas según dispositivo
            const particlesCount = isMobile ? (isLowEnd ? 500 : 1000) : (isLowEnd ? 1500 : 3000);

            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);

            // Configurar renderer con optimizaciones
            const renderer = new THREE.WebGLRenderer({
                alpha: true,
                antialias: !isLowEnd,
                powerPreference: 'high-performance'
            });
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, isLowEnd ? 1 : 2));
            renderer.setSize(window.innerWidth, window.innerHeight);

            // Hacer el canvas responsive
            renderer.domElement.style.position = 'fixed';
            renderer.domElement.style.top = '0';
            renderer.domElement.style.left = '0';
            renderer.domElement.style.zIndex = '-1';
            renderer.domElement.style.pointerEvents = 'none';

            document.getElementById('particles-bg').appendChild(renderer.domElement);

            // Crear partículas con colores (optimizado)
            const particlesGeometry = new THREE.BufferGeometry();
            const posArray = new Float32Array(particlesCount * 3);
            const colorsArray = new Float32Array(particlesCount * 3);

            // Usar typed arrays más eficientes
            for (let i = 0; i < particlesCount * 3; i += 3) {
                // Distribución más natural
                const theta = Math.random() * Math.PI * 2;
                const phi = Math.acos(2 * Math.random() - 1);
                const radius = 2 + Math.random() * 3;

                posArray[i] = radius * Math.sin(phi) * Math.cos(theta);
                posArray[i + 1] = radius * Math.sin(phi) * Math.sin(theta);
                posArray[i + 2] = radius * Math.cos(phi);

                // Colores variados (optimizado)
                const colorChoice = Math.random();
                if (colorChoice < 0.33) {
                    colorsArray[i] = 124/255;     // Purple
                    colorsArray[i + 1] = 58/255;
                    colorsArray[i + 2] = 237/255;
                } else if (colorChoice < 0.66) {
                    colorsArray[i] = 236/255;     // Pink
                    colorsArray[i + 1] = 72/255;
                    colorsArray[i + 2] = 153/255;
                } else {
                    colorsArray[i] = 245/255;     // Amber
                    colorsArray[i + 1] = 158/255;
                    colorsArray[i + 2] = 11/255;
                }
            }
            
            particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
            particlesGeometry.setAttribute('color', new THREE.BufferAttribute(colorsArray, 3));
  
            // Material optimizado según dispositivo
            const particlesMaterial = new THREE.PointsMaterial({
                size: isMobile ? 0.003 : 0.005,
                vertexColors: true,
                sizeAttenuation: true,
                transparent: true,
                opacity: isMobile ? 0.8 : 0.9
            });

            // Mesh
            const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
            scene.add(particlesMesh);

            camera.position.z = 3;

            // Optimización: Usar RAF throttled para mejor rendimiento
            let lastTime = 0;
            const targetFPS = isMobile ? 30 : 60;
            const frameInterval = 1000 / targetFPS;

            function animate(currentTime = 0) {
                requestAnimationFrame(animate);

                // Throttle frame rate en dispositivos móviles
                if (currentTime - lastTime < frameInterval) {
                    return;
                }
                lastTime = currentTime;

                // Animación más suave y eficiente
                particlesMesh.rotation.y += 0.0003;
                particlesMesh.rotation.x += 0.0001;

                renderer.render(scene, camera);
            }

            animate();

            // Optimización: Debounce para resize
            let resizeTimeout;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(() => {
                    camera.aspect = window.innerWidth / window.innerHeight;
                    camera.updateProjectionMatrix();
                    renderer.setSize(window.innerWidth, window.innerHeight);
                    renderer.setPixelRatio(Math.min(window.devicePixelRatio, isLowEnd ? 1 : 2));
                }, 250);
            });

            // Optimización: Pausar animación cuando no está visible
            document.addEventListener('visibilitychange', () => {
                if (document.hidden) {
                    // Pausar animación cuando la pestaña no está visible
                    renderer.dispose();
                } else {
                    // Reanudar cuando vuelve a ser visible
                    animate();
                }
            });

            return { scene, camera, renderer, particlesMesh };
        }

        // Función para inicializar el sistema de partículas de forma segura
        window.initializeAnimations = function() {
            // Retrasar inicialización de partículas en móviles
            const isMobile = window.innerWidth <= 768;
            const delay = isMobile ? 2000 : 500;

            setTimeout(() => {
                try {
                    initParticles();
                } catch (error) {
                    console.warn('Error initializing particles:', error);
                }
            }, delay);
        };

        // Animaciones con GSAP (optimizadas)
        function initAnimations() {
            if (typeof gsap === 'undefined') {
                console.warn('GSAP not loaded yet');
                setTimeout(initAnimations, 100);
                return;
            }

            // Optimización: Detectar preferencias de movimiento reducido
            const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            const isMobile = window.innerWidth <= 768;

            // Animación de entrada para elementos con clase fade-in-animate (optimizada)
            if (!prefersReducedMotion) {
                gsap.utils.toArray('.fade-in-animate').forEach((element, index) => {
                    gsap.fromTo(element,
                        { opacity: 0, y: 20 },
                        {
                            opacity: 1,
                            y: 0,
                            duration: isMobile ? 0.6 : 1,
                            delay: index * 0.1, // Stagger animation
                            ease: "power2.out",
                            scrollTrigger: {
                                trigger: element,
                                start: "top 85%",
                                end: "bottom 15%",
                                toggleActions: "play none none reverse",
                                // Optimización: Solo activar trigger cuando sea visible
                                once: false
                            },
                            // Al completar la animación, remover la clase
                            onComplete: () => {
                                element.classList.remove('fade-in-animate');
                            }
                        }
                    );
                });
            } else {
                // Para usuarios con preferencia de movimiento reducido
                gsap.utils.toArray('.fade-in-animate').forEach(element => {
                    gsap.set(element, { opacity: 1, y: 0 });
                    element.classList.remove('fade-in-animate');
                });
            }
  
            // Animaciones del hero (optimizadas y con preferencia de movimiento)
            if (!prefersReducedMotion) {
                // Animación del título del hero
                gsap.fromTo(".hero-title",
                    { opacity: 0, y: 50 },
                    {
                        opacity: 1,
                        y: 0,
                        duration: isMobile ? 0.8 : 1.2,
                        delay: 0.2,
                        ease: "power3.out"
                    }
                );

                // Animación del subtítulo del hero
                gsap.fromTo(".hero-subtitle",
                    { opacity: 0, y: 30 },
                    {
                        opacity: 1,
                        y: 0,
                        duration: isMobile ? 0.6 : 1,
                        delay: 0.4,
                        ease: "power2.out"
                    }
                );

                // Animación de la descripción del hero
                gsap.fromTo(".hero-description",
                    { opacity: 0, y: 20 },
                    {
                        opacity: 1,
                        y: 0,
                        duration: isMobile ? 0.6 : 1,
                        delay: 0.6,
                        ease: "power2.out"
                    }
                );

                // Optimización: Animaciones para botones con hover eficiente
                gsap.utils.toArray('button').forEach(button => {
                    // Solo añadir listeners si no son dispositivos táctiles
                    if (!('ontouchstart' in window)) {
                        button.addEventListener('mouseenter', () => {
                            gsap.to(button, {
                                scale: 1.05,
                                duration: 0.2,
                                ease: "power2.out"
                            });
                        });

                        button.addEventListener('mouseleave', () => {
                            gsap.to(button, {
                                scale: 1,
                                duration: 0.2,
                                ease: "power2.out"
                            });
                        });
                    }
                });
            } else {
                // Para usuarios con preferencia de movimiento reducido
                gsap.set(".hero-title, .hero-subtitle, .hero-description", { opacity: 1, y: 0 });
            }
            
            // Animación de los botones del hero
            gsap.fromTo(".hero-buttons", 
                { opacity: 0, y: 20 },
                { 
                    opacity: 1, 
                    y: 0, 
                    duration: 1,
                    delay: 1.1
                }
            );
            
            // Animación de las tarjetas de tecnología
            gsap.utils.toArray('.tech-card').forEach((card, index) => {
                gsap.fromTo(card, 
                    { opacity: 0, scale: 0.8 },
                    { 
                        opacity: 1, 
                        scale: 1, 
                        duration: 0.5,
                        delay: 0.1 * index,
                        scrollTrigger: {
                            trigger: card,
                            start: "top 80%",
                            end: "bottom 20%",
                            toggleActions: "play none none reverse"
                        }
                    }
                );
            });
        }
        
        // Función para abrir demos con loading state
        function openDemo(demoName) {
            // Mostrar loading overlay
            showLoading('Cargando demo...', 'Preparando la experiencia interactiva');

            // Simular tiempo de carga
            setTimeout(() => {
                hideLoading();
                document.getElementById(`${demoName}-demo`).style.display = 'flex';

                // Inicializar gráficos específicos de cada demo
                if (demoName === 'advisor') {
                    initAdvisorChart();
                } else if (demoName === 'dashboard') {
                    initDashboardCharts();
                } else if (demoName === 'ecommerce') {
                    initEcommerceFlow();
                }

                // Mostrar toast de éxito
                showToast('Demo cargada', `${demoName.charAt(0).toUpperCase() + demoName.slice(1)} demo está lista para explorar`, 'success');
            }, 1500);
        }

        // Función para cerrar demos
        function closeDemo(demoName) {
            document.getElementById(`${demoName}-demo`).style.display = 'none';
            showToast('Demo cerrada', 'Esperamos que hayas disfrutado la experiencia', 'info');
        }

        // Funciones para loading overlay
        function showLoading(text = 'Cargando...', subtext = 'Por favor, espera un momento') {
            const overlay = document.getElementById('loading-overlay');
            const loadingText = overlay.querySelector('.loading-text');
            const loadingSubtext = overlay.querySelector('.loading-subtext');

            loadingText.textContent = text;
            loadingSubtext.textContent = subtext;
            overlay.classList.add('active');
        }

        function hideLoading() {
            const overlay = document.getElementById('loading-overlay');
            overlay.classList.remove('active');
        }

        // Funciones para toast notifications
        function showToast(title, message, type = 'info', duration = 5000) {
            const container = document.getElementById('toast-container');

            const toast = document.createElement('div');
            toast.className = `toast ${type}`;

            const iconMap = {
                success: 'fas fa-check-circle',
                error: 'fas fa-exclamation-circle',
                info: 'fas fa-info-circle'
            };

            toast.innerHTML = `
                <div class="toast-icon">
                    <i class="${iconMap[type]}"></i>
                </div>
                <div class="toast-content">
                    <div class="toast-title">${title}</div>
                    <div class="toast-message">${message}</div>
                </div>
                <button class="toast-close" onclick="removeToast(this.parentElement)">
                    <i class="fas fa-times"></i>
                </button>
            `;

            container.appendChild(toast);

            // Auto-remove después de la duración
            setTimeout(() => {
                removeToast(toast);
            }, duration);
        }

        function removeToast(toast) {
            toast.style.animation = 'slideOutRight 0.3s ease';
            setTimeout(() => {
                if (toast.parentElement) {
                    toast.parentElement.removeChild(toast);
                }
            }, 300);
        }

        // Funciones para manejar estados de botones
        function setButtonLoading(button, isLoading = true) {
            if (isLoading) {
                button.classList.add('loading');
                button.disabled = true;
            } else {
                button.classList.remove('loading');
                button.disabled = false;
            }
        }

        // Función para mostrar progreso
        function showProgress(targetElement, percentage = 0, duration = 1000) {
            const progressBar = targetElement.querySelector('.progress-fill');
            if (!progressBar) return;

            const startPercentage = parseInt(progressBar.style.width) || 0;
            const startTime = performance.now();

            function updateProgress(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const currentPercentage = startPercentage + (percentage - startPercentage) * progress;

                progressBar.style.width = `${currentPercentage}%`;

                if (progress < 1) {
                    requestAnimationFrame(updateProgress);
                }
            }

            requestAnimationFrame(updateProgress);
        }
        
        // Inicializar gráfico del asesor financiero
        let portfolioChart;
        function initAdvisorChart() {
            const ctx = document.getElementById('portfolio-chart').getContext('2d');
            
            if (portfolioChart) {
                portfolioChart.destroy();
            }
            
            portfolioChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Bonos', 'Acciones', 'Criptomonedas', 'Efectivo'],
                    datasets: [{
                        data: [60, 30, 0, 10],
                        backgroundColor: [
                            '#7C3AED',
                            '#EC4899',
                            '#F59E0B',
                            '#10B981'
                        ],
                        borderWidth: 0,
                        hoverOffset: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: '#fff',
                                padding: 20,
                                font: {
                                    size: 14
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.parsed + '%';
                                }
                            }
                        }
                    },
                    animation: {
                        animateRotate: true,
                        animateScale: true
                    }
                }
            });
        }
        
        // Actualizar gráfico del asesor financiero
        function updateChart() {
            const profile = document.getElementById('risk-profile').value;
            const recommendation = document.getElementById('recommendation');
            
            let data, title, text;
            
            switch(profile) {
                case 'conservative':
                    data = [60, 30, 0, 10];
                    title = 'Recomendación para Perfil Conservador';
                    text = 'Basado en tu perfil de riesgo conservador, te recomendamos una cartera con 60% en bonos, 30% en acciones de grandes empresas y 10% en efectivo. Esta distribución busca preservar tu capital con un crecimiento moderado y bajo riesgo.';
                    break;
                case 'moderate':
                    data = [40, 50, 0, 10];
                    title = 'Recomendación para Perfil Moderado';
                    text = 'Para tu perfil de riesgo moderado, sugerimos una cartera con 40% en bonos, 50% en acciones de diferentes sectores y 10% en efectivo. Esta combinación busca un equilibrio entre crecimiento y seguridad.';
                    break;
                case 'aggressive':
                    data = [20, 60, 10, 10];
                    title = 'Recomendación para Perfil Agresivo';
                    text = 'Con tu perfil de riesgo agresivo, recomendamos una cartera con 20% en bonos, 60% en acciones (incluyendo empresas de crecimiento y emergentes), 10% en criptomonedas y 10% en efectivo. Esta estrategia maximiza el potencial de retorno a cambio de mayor volatilidad.';
                    break;
            }
            
            portfolioChart.data.datasets[0].data = data;
            portfolioChart.update();
            
            recommendation.innerHTML = `<h3 style="margin-bottom: 1rem; color: var(--secondary);">${title}</h3><p style="line-height: 1.6;">${text}</p>`;
        }
        
        // Inicializar gráficos del dashboard mejorados
        function initDashboardCharts() {
            // Animar contadores del dashboard
            animateCounters();

            // Simular actualización periódica de datos
            setInterval(updateDashboardData, 5000);

            // Gráfico de anuncios por plataforma
            const platformCtx = document.getElementById('platform-chart').getContext('2d');
            const platformChart = new Chart(platformCtx, {
                type: 'bar',
                data: {
                    labels: ['Google', 'Meta', 'LinkedIn', 'Twitter', 'TikTok'],
                    datasets: [{
                        label: 'Anuncios',
                        data: [125, 89, 67, 45, 78],
                        backgroundColor: [
                            'rgba(66, 133, 244, 0.8)',
                            'rgba(24, 119, 242, 0.8)',
                            'rgba(0, 119, 181, 0.8)',
                            'rgba(29, 161, 242, 0.8)',
                            'rgba(0, 0, 0, 0.8)'
                        ],
                        borderWidth: 0,
                        borderRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    animation: {
                        duration: 2000,
                        easing: 'easeInOutQuart'
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.parsed.y} anuncios`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: '#fff'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        },
                        x: {
                            ticks: {
                                color: '#fff'
                            },
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });

            // Gráfico de tendencia de anuncios
            const trendCtx = document.getElementById('trend-chart').getContext('2d');
            const trendChart = new Chart(trendCtx, {
                type: 'line',
                data: {
                    labels: ['Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sáb', 'Dom'],
                    datasets: [{
                        label: 'Google',
                        data: [12, 19, 15, 25, 22, 30, 28],
                        borderColor: '#4285F4',
                        backgroundColor: 'rgba(66, 133, 244, 0.1)',
                        tension: 0.4,
                        fill: true,
                        pointRadius: 5,
                        pointHoverRadius: 8
                    }, {
                        label: 'Meta',
                        data: [8, 11, 13, 15, 12, 18, 16],
                        borderColor: '#1877F2',
                        backgroundColor: 'rgba(24, 119, 242, 0.1)',
                        tension: 0.4,
                        fill: true,
                        pointRadius: 5,
                        pointHoverRadius: 8
                    }, {
                        label: 'LinkedIn',
                        data: [5, 8, 7, 10, 9, 12, 11],
                        borderColor: '#0077B5',
                        backgroundColor: 'rgba(0, 119, 181, 0.1)',
                        tension: 0.4,
                        fill: true,
                        pointRadius: 5,
                        pointHoverRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    animation: {
                        duration: 2500,
                        easing: 'easeInOutQuart'
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: '#fff'
                            }
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: '#fff'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        },
                        x: {
                            ticks: {
                                color: '#fff'
                            },
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });

            // Simular actualizaciones de datos en tiempo real
            setInterval(() => {
                // Actualizar gráfico de plataforma con datos aleatorios
                platformChart.data.datasets[0].data = platformChart.data.datasets[0].data.map(val =>
                    Math.max(20, val + Math.floor(Math.random() * 21 - 10))
                );
                platformChart.update('none'); // Actualizar sin animación para cambios sutiles

                // Actualizar gráfico de tendencia
                trendChart.data.datasets.forEach(dataset => {
                    dataset.data = dataset.data.map(val =>
                        Math.max(5, val + Math.floor(Math.random() * 11 - 5))
                    );
                });
                trendChart.update('none');
            }, 8000);
        }

        // Función para animar contadores
        function animateCounters() {
            const counters = document.querySelectorAll('.metric-value[data-target]');

            counters.forEach(counter => {
                const target = parseInt(counter.getAttribute('data-target'));
                const duration = 2000;
                const increment = target / (duration / 16);
                let current = 0;

                counter.classList.add('counting');

                const updateCounter = () => {
                    current += increment;
                    if (current < target) {
                        counter.textContent = Math.floor(current);
                        requestAnimationFrame(updateCounter);
                    } else {
                        counter.textContent = target;
                        counter.classList.remove('counting');
                    }
                };

                updateCounter();
            });
        }

        // Función para actualizar datos del dashboard
        function updateDashboardData() {
            const cards = document.querySelectorAll('.dashboard-card');

            cards.forEach(card => {
                // Añadir efecto de carga
                card.classList.add('loading');

                setTimeout(() => {
                    card.classList.remove('loading');

                    // Actualizar algunos valores aleatoriamente
                    const metricValue = card.querySelector('.metric-value');
                    if (metricValue && metricValue.getAttribute('data-target')) {
                        const currentTarget = parseInt(metricValue.getAttribute('data-target'));
                        const newTarget = currentTarget + Math.floor(Math.random() * 21 - 10);
                        metricValue.setAttribute('data-target', Math.max(0, newTarget));
                        metricValue.textContent = Math.max(0, newTarget);
                    }
                }, 1000);
            });
        }
        
        // Animación del flujo de documentos
        function animateDocFlow() {
            const steps = document.querySelectorAll('.doc-step');
            
            steps.forEach((step, index) => {
                gsap.fromTo(step, 
                    { opacity: 0, x: -50 },
                    { 
                        opacity: 1, 
                        x: 0, 
                        duration: 0.5,
                        delay: 0.3 * index,
                        ease: "power2.out"
                    }
                );
            });
        }
        
        // Carrito de compras mejorado
        let cart = [];
        let cartTotal = 0;

        function updateCartIndicator() {
            const indicator = document.getElementById('cart-indicator');
            if (cart.length > 0) {
                indicator.style.display = 'flex';
                indicator.textContent = cart.length;
            } else {
                indicator.style.display = 'none';
            }
        }

        function addToCart(product) {
            cart.push(product);
            updateCartIndicator();
            return true;
        }

        function clearCart() {
            cart = [];
            cartTotal = 0;
            updateCartIndicator();
        }

        // Simulación de chat para E-Commerce mejorada
        const chatResponses = {
            "start": {
                bot: ["¡Hola! Bienvenido a Linnia. Soy tu asistente de compras personal. ¿Qué estás buscando hoy? 🛍️"],
                replies: [
                    { text: "Ver catálogo", icon: "fa-th", action: "show_catalog" },
                    { text: "Ofertas", icon: "fa-tag", action: "show_offers" },
                    { text: "Mi pedido", icon: "fa-box", action: "track_order" },
                    { text: "Ayuda", icon: "fa-question-circle", action: "help" }
                ]
            },
            "show_catalog": {
                bot: ["¡Claro! Aquí tienes nuestras categorías principales:"],
                replies: [
                    { text: "Ropa", icon: "fa-tshirt", action: "show_category_ropa" },
                    { text: "Electrónicos", icon: "fa-laptop", action: "show_category_electronicos" },
                    { text: "Hogar", icon: "fa-couch", action: "show_category_hogar" },
                    { text: "Volver", icon: "fa-arrow-left", action: "start" }
                ]
            },
            "show_category_ropa": {
                bot: ["Excelente elección. Aquí tienes nuestros productos más vendidos:", {
                    type: "product",
                    id: "camisa_casual",
                    name: "Camisa Casual Premium",
                    description: "Algodón 100%, varios colores",
                    price: "$599.00",
                    originalPrice: "$799.00",
                    badge: "-25%",
                    image: "https://picsum.photos/seed/camisa1/70/70"
                }, {
                    type: "product",
                    id: "pantalon_jeans",
                    name: "Pantalón Jeans Slim",
                    description: "Tela elástica, slim fit",
                    price: "$899.00",
                    originalPrice: "$1099.00",
                    badge: "-18%",
                    image: "https://picsum.photos/seed/jeans1/70/70"
                }, {
                    type: "product",
                    id: "vestido_verano",
                    name: "Vestido de Verano",
                    description: "Ligero y fresco, talla única",
                    price: "$450.00",
                    originalPrice: null,
                    badge: "Nuevo",
                    image: "https://picsum.photos/seed/vestido1/70/70"
                }],
                replies: [
                    { text: "Agregar Camisa", icon: "fa-cart-plus", action: "add_to_cart_camisa" },
                    { text: "Agregar Jeans", icon: "fa-cart-plus", action: "add_to_cart_jeans" },
                    { text: "Agregar Vestido", icon: "fa-cart-plus", action: "add_to_cart_vestido" },
                    { text: "Ver más", icon: "fa-search-plus", action: "show_catalog" },
                    { text: "Volver", icon: "fa-arrow-left", action: "show_catalog" }
                ]
            },
            "add_to_cart_camisa": {
                bot: ["¡Camisa Casual Premium agregada a tu carrito! 🛒"],
                beforeReply: () => addToCart({
                    id: "camisa_casual",
                    name: "Camisa Casual Premium",
                    price: 599
                }),
                replies: [
                    { text: "Seguir comprando", icon: "fa-shopping-bag", action: "show_catalog" },
                    { text: "Ver carrito", icon: "fa-shopping-cart", action: "view_cart" },
                    { text: "Pagar ahora", icon: "fa-credit-card", action: "checkout" }
                ]
            },
            "add_to_cart_jeans": {
                bot: ["¡Pantalón Jeans Slim agregado a tu carrito! 🛒"],
                beforeReply: () => addToCart({
                    id: "pantalon_jeans",
                    name: "Pantalón Jeans Slim",
                    price: 899
                }),
                replies: [
                    { text: "Seguir comprando", icon: "fa-shopping-bag", action: "show_catalog" },
                    { text: "Ver carrito", icon: "fa-shopping-cart", action: "view_cart" },
                    { text: "Pagar ahora", icon: "fa-credit-card", action: "checkout" }
                ]
            },
            "add_to_cart_vestido": {
                bot: ["¡Vestido de Verano agregado a tu carrito! 🛒"],
                beforeReply: () => addToCart({
                    id: "vestido_verano",
                    name: "Vestido de Verano",
                    price: 450
                }),
                replies: [
                    { text: "Seguir comprando", icon: "fa-shopping-bag", action: "show_catalog" },
                    { text: "Ver carrito", icon: "fa-shopping-cart", action: "view_cart" },
                    { text: "Pagar ahora", icon: "fa-credit-card", action: "checkout" }
                ]
            },
            "view_cart": {
                bot: () => {
                    if (cart.length === 0) {
                        return ["Tu carrito está vacío. ¿Te gustaría ver nuestro catálogo? 🛍️"];
                    } else {
                        cartTotal = cart.reduce((sum, item) => sum + item.price, 0);
                        const items = cart.map(item => `• ${item.name} ($${item.price}.00)`).join('\n');
                        return [`🛒 **Tu Carrito**\n\n${items}\n\n**Total: $${cartTotal}.00**\n\n¿Quieres proceder al pago o seguir comprando?`];
                    }
                },
                replies: () => {
                    if (cart.length === 0) {
                        return [
                            { text: "Ver catálogo", icon: "fa-th", action: "show_catalog" },
                            { text: "Volver", icon: "fa-arrow-left", action: "start" }
                        ];
                    } else {
                        return [
                            { text: "Seguir comprando", icon: "fa-shopping-bag", action: "show_catalog" },
                            { text: "Pagar ahora", icon: "fa-credit-card", action: "checkout" },
                            { text: "Vaciar carrito", icon: "fa-trash", action: "clear_cart" }
                        ];
                    }
                }
            },
            "clear_cart": {
                bot: ["Tu carrito ha sido vaciado. ¿Te gustaría ver nuestro catálogo? 🛍️"],
                beforeReply: () => clearCart(),
                replies: [
                    { text: "Ver catálogo", icon: "fa-th", action: "show_catalog" },
                    { text: "Volver", icon: "fa-arrow-left", action: "start" }
                ]
            },
            "checkout": {
                bot: () => {
                    if (cart.length === 0) {
                        return ["Tu carrito está vacío. Agrega algunos productos antes de proceder al pago."];
                    } else {
                        cartTotal = cart.reduce((sum, item) => sum + item.price, 0);
                        return [`✅ **Resumen de tu compra**\n\n${cart.length} productos\nTotal: $${cartTotal}.00\n\nPara completar tu compra, selecciona una opción de pago:`];
                    }
                },
                replies: () => {
                    if (cart.length === 0) {
                        return [
                            { text: "Ver catálogo", icon: "fa-th", action: "show_catalog" }
                        ];
                    } else {
                        return [
                            { text: "Pagar con Tarjeta", icon: "fa-credit-card", action: "pay_card" },
                            { text: "Pagar con PayPal", icon: "fab fa-paypal", action: "pay_paypal" },
                            { text: "Cancelar", icon: "fa-times", action: "start" }
                        ];
                    }
                }
            },
            "pay_card": {
                bot: ["💳 **Procesando pago con tarjeta...**\n\n✅ ¡Pago aprobado! Tu pedido ha sido confirmado.\n\n📧 Recibirás un correo con los detalles de tu compra.\n\n¡Gracias por comprar en Linnia! ❤️"],
                beforeReply: () => clearCart(),
                replies: [
                    { text: "Comprar de nuevo", icon: "fa-redo", action: "start" },
                    { text: "Calificar servicio", icon: "fa-star", action: "rate_service" }
                ]
            },
            "pay_paypal": {
                bot: ["💰 **Redirigiendo a PayPal...**\n\n✅ ¡Pago completado! Tu pedido ha sido confirmado.\n\n📧 Recibirás un correo con los detalles de tu compra.\n\n¡Gracias por comprar en Linnia! ❤️"],
                beforeReply: () => clearCart(),
                replies: [
                    { text: "Comprar de nuevo", icon: "fa-redo", action: "start" },
                    { text: "Calificar servicio", icon: "fa-star", action: "rate_service" }
                ]
            },
            "rate_service": {
                bot: ["⭐ **Califica nuestro servicio**\n\n¿Cómo fue tu experiencia de compra?"],
                replies: [
                    { text: "⭐⭐⭐⭐⭐ Excelente", icon: "fa-star", action: "thank_you" },
                    { text: "⭐⭐⭐⭐ Muy bueno", icon: "fa-star", action: "thank_you" },
                    { text: "⭐⭐⭐ Regular", icon: "fa-star", action: "improve_service" },
                    { text: "⭐⭐ Malo", icon: "fa-star", action: "improve_service" }
                ]
            },
            "thank_you": {
                bot: ["¡Gracias por tu calificación! 😊 Nos alegra que hayas tenido una excelente experiencia.\n\n¡Esperamos verte pronto en Linnia! 👋"],
                replies: [
                    { text: "Comprar de nuevo", icon: "fa-redo", action: "start" }
                ]
            },
            "improve_service": {
                bot: ["Agradecemos tu feedback. Trabajaremos constantemente para mejorar nuestro servicio.\n\n¿Hay algo específico en lo que podamos mejorar?"],
                replies: [
                    { text: "Enviar sugerencia", icon: "fa-comment", action: "send_feedback" },
                    { text: "Comprar de nuevo", icon: "fa-redo", action: "start" }
                ]
            },
            "send_feedback": {
                bot: ["¡Gracias por tu sugerencia! La hemos recibido y la tomaremos en cuenta para mejorar nuestro servicio.\n\n¡Te esperamos pronto en Linnia! 🛍️"],
                replies: [
                    { text: "Comprar de nuevo", icon: "fa-redo", action: "start" }
                ]
            },
            "show_offers": {
                bot: ["🔥 **OFERTAS ESPECIALES** 🎉\n\n• 30% de descuento en toda la categoría de Ropa\n• 2x1 en Electrónicos seleccionados\n• Envío gratis en compras mayores a $1000\n\nUsa el código **VERANO25** para obtener 25% adicional 🎁"],
                replies: [
                    { text: "Ver ropa en oferta", icon: "fa-tshirt", action: "show_category_ropa" },
                    { text: "Ver electrónicos", icon: "fa-laptop", action: "show_category_electronicos" },
                    { text: "Volver", icon: "fa-arrow-left", action: "start" }
                ]
            },
            "show_category_electronicos": {
                bot: ["📱 **Electrónicos más populares**:", {
                    type: "product",
                    id: "smartphone",
                    name: "Smartphone Pro Max",
                    description: "256GB, 5G, cámara 48MP",
                    price: "$12,999.00",
                    originalPrice: "$15,999.00",
                    badge: "-19%",
                    image: "https://picsum.photos/seed/phone1/70/70"
                }, {
                    type: "product",
                    id: "laptop",
                    name: "Laptop Ultraligera",
                    description: "Intel i7, 16GB RAM, 512GB SSD",
                    price: "$18,500.00",
                    originalPrice: "$22,000.00",
                    badge: "-16%",
                    image: "https://picsum.photos/seed/laptop1/70/70"
                }],
                replies: [
                    { text: "Agregar Smartphone", icon: "fa-cart-plus", action: "add_to_cart_phone" },
                    { text: "Agregar Laptop", icon: "fa-cart-plus", action: "add_to_cart_laptop" },
                    { text: "Ver más", icon: "fa-search-plus", action: "show_catalog" },
                    { text: "Volver", icon: "fa-arrow-left", action: "show_catalog" }
                ]
            },
            "add_to_cart_phone": {
                bot: ["¡Smartphone Pro Max agregado a tu carrito! 📱"],
                beforeReply: () => addToCart({
                    id: "smartphone",
                    name: "Smartphone Pro Max",
                    price: 12999
                }),
                replies: [
                    { text: "Seguir comprando", icon: "fa-shopping-bag", action: "show_catalog" },
                    { text: "Ver carrito", icon: "fa-shopping-cart", action: "view_cart" },
                    { text: "Pagar ahora", icon: "fa-credit-card", action: "checkout" }
                ]
            },
            "add_to_cart_laptop": {
                bot: ["¡Laptop Ultraligera agregada a tu carrito! 💻"],
                beforeReply: () => addToCart({
                    id: "laptop",
                    name: "Laptop Ultraligera",
                    price: 18500
                }),
                replies: [
                    { text: "Seguir comprando", icon: "fa-shopping-bag", action: "show_catalog" },
                    { text: "Ver carrito", icon: "fa-shopping-cart", action: "view_cart" },
                    { text: "Pagar ahora", icon: "fa-credit-card", action: "checkout" }
                ]
            },
            "track_order": {
                bot: ["📦 **Rastreo de Pedidos**\n\nPara rastrear tu pedido, por favor introduce tu número de orden (ej: LIN-2024-1234)"],
                replies: [
                    { text: "Ingresar número de orden", icon: "fa-search", action: "track_order_input" },
                    { text: "Volver", icon: "fa-arrow-left", action: "start" }
                ]
            },
            "track_order_input": {
                bot: ["🔍 **Pedido LIN-2024-1234**\n\nEstado: **En camino** 🚚\nFecha estimada: 3-5 días hábiles\nUbicación actual: Centro de distribución Monterrey\n\n¿Te gustaría recibir notificaciones por WhatsApp? 📱"],
                replies: [
                    { text: "Sí, activar notificaciones", icon: "fa-bell", action: "enable_notifications" },
                    { text: "No, gracias", icon: "fa-times", action: "start" }
                ]
            },
            "enable_notifications": {
                bot: ["✅ **Notificaciones activadas**\n\nRecibirás actualizaciones de tu pedido por WhatsApp.\n\n¡Gracias por tu preferencia! 🛍️"],
                replies: [
                    { text: "Volver al inicio", icon: "fa-home", action: "start" }
                ]
            },
            "help": {
                bot: ["🤝 **Centro de Ayuda**\n\n¿En qué puedo asistirte?"],
                replies: [
                    { text: "Ver catálogo", icon: "fa-th", action: "show_catalog" },
                    { text: "Rastrear mi pedido", icon: "fa-box", action: "track_order" },
                    { text: "Cambios y devoluciones", icon: "fa-exchange-alt", action: "returns" },
                    { text: "Hablar con un humano", icon: "fa-user", action: "human_support" }
                ]
            },
            "returns": {
                bot: ["🔄 **Política de Cambios y Devoluciones**\n\n• 30 días para cambios y devoluciones\n• Producto debe estar en condiciones originales\n• Envío gratuito para cambios\n• Reembolso en 3-5 días hábiles\n\n¿Necesitas iniciar un cambio o devolución?"],
                replies: [
                    { text: "Iniciar devolución", icon: "fa-undo", action: "start_return" },
                    { text: "Volver", icon: "fa-arrow-left", action: "help" }
                ]
            },
            "start_return": {
                bot: ["Para iniciar tu devolución, por favor proporciona el número de pedido y describe el motivo del retorno.\n\nUn agente te contactará en las próximas 24 horas. 📞"],
                replies: [
                    { text: "Entendido", icon: "fa-check", action: "start" }
                ]
            },
            "human_support": {
                bot: ["👤 **Conectando con agente humano**\n\nPor favor, espera un momento...\n\nTiempo estimado de espera: 2-3 minutos\n\nMientras esperas, ¿hay algo específico en lo que pueda ayudarte?"],
                replies: [
                    { text: "Esperar a agente", icon: "fa-user-clock", action: "waiting_agent" },
                    { text: "Cancelar", icon: "fa-times", action: "start" }
                ]
            },
            "waiting_agent": {
                bot: ["⏳ **Buscando agente disponible...**\n\nTu posición en la fila: #2\n\nUn agente te atenderá en aproximadamente 1 minuto.\n\nGracias por tu paciencia. 🙏"],
                replies: [
                    { text: "Seguir esperando", icon: "fa-hourglass-half", action: "waiting_agent" },
                    { text: "Dejar mensaje", icon: "fa-comment", action: "leave_message" },
                    { text: "Cancelar", icon: "fa-times", action: "start" }
                ]
            },
            "leave_message": {
                bot: ["📝 **Mensaje recibido**\n\nUn agente revisará tu mensaje y te responderá por correo electrónico dentro de las próximas 2 horas.\n\n¡Gracias por contactarnos! 😊"],
                replies: [
                    { text: "Volver al inicio", icon: "fa-home", action: "start" }
                ]
            }
        };

        function displayUserMessage(text) {
            const messagesContainer = document.getElementById('chat-messages');
            const userMessage = document.createElement('div');
            userMessage.className = 'message user-message';
            userMessage.textContent = text;
            messagesContainer.appendChild(userMessage);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function displayBotMessage(message) {
            const messagesContainer = document.getElementById('chat-messages');
            const botMessageContainer = document.createElement('div');
            botMessageContainer.className = 'message bot-message';

            if (typeof message === 'string') {
                // Convert markdown-like text to HTML
                botMessageContainer.innerHTML = message
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                    .replace(/\n/g, '<br>');
            } else if (message.type === 'product') {
                const priceHtml = message.originalPrice ?
                    `<div class="product-price">${message.price} <small style="text-decoration: line-through; color: #999; font-size: 0.8rem;">${message.originalPrice}</small></div>` :
                    `<div class="product-price">${message.price}</div>`;

                const badgeHtml = message.badge ?
                    `<div class="product-badge">${message.badge}</div>` : '';

                botMessageContainer.innerHTML = `
                    <div class="product-card" data-product-id="${message.id}">
                        <img src="${message.image}" alt="${message.name}" class="product-image">
                        <div class="product-info">
                            <div class="product-name">${message.name}</div>
                            ${message.description ? `<div class="product-description">${message.description}</div>` : ''}
                            ${priceHtml}
                        </div>
                        ${badgeHtml}
                    </div>
                `;
            }

            messagesContainer.appendChild(botMessageContainer);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        function displayTypingIndicator() {
            const messagesContainer = document.getElementById('chat-messages');
            const typingIndicator = document.createElement('div');
            typingIndicator.className = 'message bot-message';
            typingIndicator.innerHTML = '<div class="typing-indicator"><span></span><span></span><span></span></div>';
            messagesContainer.appendChild(typingIndicator);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            return typingIndicator;
        }

        function updateQuickReplies(replies) {
            const repliesContainer = document.querySelector('#chat-input-container .quick-replies');
            repliesContainer.innerHTML = '';
            if (replies && replies.length > 0) {
                replies.forEach(reply => {
                    const replyButton = document.createElement('div');
                    replyButton.className = 'quick-reply';
                    replyButton.setAttribute('onclick', `sendQuickReply('${reply.action}')`);
                    replyButton.innerHTML = `<i class="fas ${reply.icon}"></i> ${reply.text}`;
                    repliesContainer.appendChild(replyButton);
                });
            }
        }

        function sendQuickReply(action) {
            // Find the text associated with the action for display
            const repliesContainer = document.querySelector('#chat-input-container .quick-replies');
            let userMessageText = '';
            for(let i = 0; i < repliesContainer.children.length; i++){
                const button = repliesContainer.children[i];
                if(button.getAttribute('onclick') === `sendQuickReply('${action}')`){
                    userMessageText = button.textContent.trim();
                    break;
                }
            }

            if(userMessageText) displayUserMessage(userMessageText);

            const response = chatResponses[action];
            if (!response) return;

            // Execute beforeReply function if exists
            if (response.beforeReply) {
                response.beforeReply();
            }

            const typingIndicator = displayTypingIndicator();
            updateQuickReplies([]); // Clear buttons while bot is "thinking"

            setTimeout(() => {
                typingIndicator.remove();

                // Handle dynamic bot messages
                let botMessages = [];
                if (typeof response.bot === 'function') {
                    botMessages = response.bot();
                } else {
                    botMessages = response.bot;
                }

                botMessages.forEach(message => {
                    displayBotMessage(message);
                });

                // Handle dynamic replies
                let replies = [];
                if (typeof response.replies === 'function') {
                    replies = response.replies();
                } else {
                    replies = response.replies;
                }

                if (replies) {
                    updateQuickReplies(replies);
                }
            }, 1200); // Simulate bot thinking time
        }
        
        function initEcommerceDemo() {
            const initialResponse = chatResponses['start'];
            updateQuickReplies(initialResponse.replies);
        }

        function initEcommerceFlow() {
            // Limpiar el chat antes de iniciar
            const chatMessages = document.getElementById('chat-messages');
            if (chatMessages) {
                chatMessages.innerHTML = `
                    <div class="message bot-message">
                        ¡Hola! Bienvenido a Linnia. Soy tu asistente de compras personal. ¿Qué estás buscando hoy? 🛍️
                    </div>
                `;
            }

            // Limpiar carrito
            clearCart();

            // Inicializar el chat con las respuestas iniciales
            initEcommerceDemo();
        }
        
        // Scroll suave para enlaces de navegación
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                if (this.getAttribute('href') !== '#') {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                }
            });
        });
        
        // Cambiar estilo de navegación al hacer scroll
        window.addEventListener('scroll', () => {
            const navbar = document.getElementById('navbar');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });
        
        // Botón flotante para volver arriba
        document.getElementById('scrollToTop').addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
        
        // Funcionalidad del menú móvil
        function openMobileMenu() {
            const mobileMenu = document.getElementById('mobile-menu');
            const overlay = document.getElementById('mobile-menu-overlay');
            mobileMenu.classList.add('active');
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeMobileMenu() {
            const mobileMenu = document.getElementById('mobile-menu');
            const overlay = document.getElementById('mobile-menu-overlay');
            mobileMenu.classList.remove('active');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
        }

        // Event listeners del menú móvil
        document.getElementById('mobile-menu-btn').addEventListener('click', openMobileMenu);
        document.getElementById('mobile-menu-close').addEventListener('click', closeMobileMenu);
        document.getElementById('mobile-menu-overlay').addEventListener('click', closeMobileMenu);

        // Cerrar menú al hacer scroll
        let lastScrollTop = 0;
        window.addEventListener('scroll', () => {
            const mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenu.classList.contains('active')) {
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                if (Math.abs(scrollTop - lastScrollTop) > 50) {
                    closeMobileMenu();
                }
                lastScrollTop = scrollTop;
            }
        });

        // Sistema de inicialización optimizado
        document.addEventListener('DOMContentLoaded', () => {
            // Asegurar que el contenido sea visible inmediatamente
            document.body.style.opacity = '1';
            document.body.style.transition = 'opacity 0.3s ease-in';

            // Preparar elementos para animación cuando GSAP esté disponible
            document.querySelectorAll('.fade-in').forEach(el => {
                el.classList.add('fade-in-animate');
            });

            // Inicializar animaciones solo si GSAP está cargado
            if (typeof gsap !== 'undefined') {
                initAnimations();
            } else {
                // Si GSAP no está cargado, reintentar en intervalos
                let retryCount = 0;
                const maxRetries = 10;
                const retryInterval = setInterval(() => {
                    retryCount++;
                    if (typeof gsap !== 'undefined') {
                        clearInterval(retryInterval);
                        initAnimations();
                    } else if (retryCount >= maxRetries) {
                        clearInterval(retryInterval);
                        console.warn('GSAP failed to load after multiple attempts');
                        // Fallback: mostrar contenido sin animaciones
                        document.querySelectorAll('.fade-in-animate').forEach(el => {
                            el.classList.remove('fade-in-animate');
                        });
                    }
                }, 200);
            }

            // Inicializar partículas con delay optimizado
            const isMobile = window.innerWidth <= 768;
            const particleDelay = isMobile ? 2000 : 500;

            setTimeout(() => {
                if (typeof THREE !== 'undefined') {
                    try {
                        initParticles();
                    } catch (error) {
                        console.warn('Error initializing particles:', error);
                    }
                } else {
                    console.warn('Three.js not available for particles');
                }
            }, particleDelay);

            // Optimización: Lazy loading para imágenes si existen
            if ('IntersectionObserver' in window) {
                const imageObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            if (img.dataset.src) {
                                img.src = img.dataset.src;
                                img.classList.remove('lazy');
                                imageObserver.unobserve(img);
                            }
                        }
                    });
                });

                document.querySelectorAll('img[data-src]').forEach(img => {
                    imageObserver.observe(img);
                });
            }

            // Optimización: Preload enlaces importantes
            const importantLinks = document.querySelectorAll('a[href^="http"]');
            importantLinks.forEach(link => {
                link.addEventListener('mouseenter', () => {
                    const prefetchLink = document.createElement('link');
                    prefetchLink.rel = 'prefetch';
                    prefetchLink.href = link.href;
                    document.head.appendChild(prefetchLink);
                }, { once: true });
            });

            // Inicializar notificaciones toast (si existen)
            initializeToastSystem();
        });

        // Sistema de notificaciones toast optimizado
        function initializeToastSystem() {
            // Crear contenedor de toasts si no existe
            if (!document.getElementById('toast-container')) {
                const toastContainer = document.createElement('div');
                toastContainer.id = 'toast-container';
                toastContainer.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    z-index: 9999;
                    pointer-events: none;
                `;
                document.body.appendChild(toastContainer);
            }
        }

        // Optimización: Función debounce para eventos frecuentes
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Optimización: Función throttle para animaciones
        function throttle(func, limit) {
            let inThrottle;
            return function(...args) {
                if (!inThrottle) {
                    func.apply(this, args);
                    inThrottle = true;
                    setTimeout(() => inThrottle = false, limit);
                }
            };
        }
    </script>
</body>
</html>
